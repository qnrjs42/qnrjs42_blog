---
date: '2021-03-31'
title: '[Nextjs, Redux] Nextjs + Redux-Toolkit + Typescript (with Hooks)'
categories: ['React', 'Nextjs', 'Typescript', 'Redux', 'Redux-Toolkit']
summary: '21.12.19 update. nextjs(v12) reduxtoolkit(v7), getServerSideProps'
---

> > 21.12.19 일 업데이트
> >
> > codesandbox 적용
> >
> > nextjs v12, redux-toolkit v7 적용
>
> > 21.03.31 수 업데이트
> >
> > useSelector 타입추론 추가 (공식문서 참고)

redux-toolkit에 대한 설명은 아래 링크에서

참고 Link: [https://github.com/qnrjs42/redux_toolkit_mobx][link]

[link]: https://github.com/qnrjs42/redux_toolkit_mobx 'Go'

**버전에 따라 달라질 수 있으니 유의해야합니다!!!!!**

<br />

<iframe
  src='https://codesandbox.io/embed/nextjs-redux-toolkit-typescript-lwp70?fontsize=14&hidenavigation=1&theme=dark'
  style='width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;'
  title='nextjs+redux-toolkit-typescript'
  allow='accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking'
  sandbox='allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts'
/>

---

## 이미지로 상태 변화 보기 (예시)

### 처음 실행했을 때

- 크롬-개발자 도구-콘솔에서 처음 실행했을 때 해당 로그가 출력되어야 `next-redux-wrapper`가 제대로 실행된걸 알 수 있습니다.

<img src='/images/nextjs-redux-toolkit/1.png' width='100%' />

### 로그인폼에 아이디/패스워드 입력

<img src='/images/nextjs-redux-toolkit/2.png' width='50%' />

### 로그인 성공

<img src='/images/nextjs-redux-toolkit/3.png' width='50%' />

### 로그인 성공 후 로그

- 1 line log: `components/LoginForm.tsx`에서 `dispatch`하기 전
- 2 line log: `actions/users.ts`에서 `logInAction`안에서
- 3 line log: `components/AppLayout.tsx`에서 `useSelector`로 `isLoggedIn`가져온 후

<img src='/images/nextjs-redux-toolkit/4.png' width='100%' />

### redux 상태 변화 / State / pending

<img src='/images/nextjs-redux-toolkit/5.png' width='100%' />

### redux 상태 변화 / Diff / pending

<img src='/images/nextjs-redux-toolkit/6.png' width='100%' />

### redux 상태 변화 / Diff / fulfilled

<img src='/images/nextjs-redux-toolkit/7.png' width='100%' />

### redux 상태 변화 / State/ fulfilled

<img src='/images/nextjs-redux-toolkit/8.png' width='100%' />

---

## 참고 링크

- [https://redux-toolkit.js.org/usage/usage-with-typescript][link2]
  [link2]: https://redux-toolkit.js.org/usage/usage-with-typescript 'Go'

- [https://stackoverflow.com/questions/64139344/how-to-use-typescript-next-redux-wrapper-getserversideprops][link3]
  [link3]: https://stackoverflow.com/questions/64139344/how-to-use-typescript-next-redux-wrapper-getserversideprops 'Go'

- [https://maruzzing.github.io/study/react/Redux-toolkit%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC-1/][link4]
  [link4]: https://maruzzing.github.io/study/react/Redux-toolkit%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%83%81%ED%83%9C%EA%B4%80%EB%A6%AC-1/ 'Go'

- [https://github.com/qnrjs42/UrlCut_Project/tree/master/front][link5]
  [link5]: https://github.com/qnrjs42/UrlCut_Project/tree/master/front 'Go'
